{"ast":null,"code":"var _jsxFileName = \"/home/coelho/Projetos-Trybe/Projetos-Turma23A/sd-023-a-project-trivia-react-redux/src/Pages/Login.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport fetchToken from '../helpers/triviaApi';\nimport { userLogin } from '../redux/actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      nameInput: '',\n      emailInput: '',\n      isDisabled: true\n    };\n\n    this.redirectToSettings = () => {\n      const {\n        history\n      } = this.props;\n      history.push('/settings');\n    };\n\n    this.fetchButtonSubmit = async event => {\n      const {\n        history,\n        dispatch\n      } = this.props;\n      const {\n        nameInput,\n        emailInput\n      } = this.state;\n      event.preventDefault();\n      const response = await fetchToken();\n      localStorage.setItem('token', response.token);\n      dispatch(userLogin({\n        name: nameInput,\n        email: emailInput\n      }));\n      history.push('/game');\n    };\n\n    this.checkButton = () => {\n      const {\n        nameInput,\n        emailInput\n      } = this.state;\n      const validator = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;\n      const check = [nameInput.length > 0, emailInput.length > 0, validator.test(emailInput)];\n\n      if (check.every(item => item === true)) {\n        this.setState({\n          isDisabled: false\n        });\n      } else {\n        this.setState({\n          isDisabled: true\n        });\n      }\n    };\n\n    this.changeHandler = _ref => {\n      let {\n        target\n      } = _ref;\n      this.setState({\n        [target.name]: target.value\n      }, this.checkButton);\n    };\n  }\n\n  render() {\n    const {\n      nameInput,\n      emailInput,\n      isDisabled\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"data-testid\": \"btn-settings\",\n        onClick: this.redirectToSettings,\n        children: \"Configura\\xE7\\xF5es\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"nameInput\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"nameInput\",\n            id: \"nameInput\",\n            value: nameInput,\n            \"data-testid\": \"input-player-name\",\n            onChange: this.changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"emailInput\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"emailInput\",\n            id: \"emailInput\",\n            value: emailInput,\n            \"data-testid\": \"input-gravatar-email\",\n            onChange: this.changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          \"data-testid\": \"btn-play\",\n          disabled: isDisabled,\n          onClick: this.fetchButtonSubmit,\n          children: \"Play\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired\n};\nexport default connect()(Login);","map":{"version":3,"names":["React","Component","PropTypes","connect","fetchToken","userLogin","Login","state","nameInput","emailInput","isDisabled","redirectToSettings","history","props","push","fetchButtonSubmit","event","dispatch","preventDefault","response","localStorage","setItem","token","name","email","checkButton","validator","check","length","test","every","item","setState","changeHandler","target","value","render","propTypes","shape","func","isRequired"],"sources":["/home/coelho/Projetos-Trybe/Projetos-Turma23A/sd-023-a-project-trivia-react-redux/src/Pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport fetchToken from '../helpers/triviaApi';\nimport { userLogin } from '../redux/actions';\n\nclass Login extends Component {\n  state = {\n    nameInput: '',\n    emailInput: '',\n    isDisabled: true,\n  };\n\n  redirectToSettings = () => {\n    const { history } = this.props;\n    history.push('/settings');\n  };\n\n  fetchButtonSubmit = async (event) => {\n    const { history, dispatch } = this.props;\n    const { nameInput, emailInput } = this.state;\n    event.preventDefault();\n    const response = await fetchToken();\n    localStorage.setItem('token', response.token);\n    dispatch(userLogin({ name: nameInput, email: emailInput }));\n    history.push('/game');\n  };\n\n  checkButton = () => {\n    const { nameInput, emailInput } = this.state;\n    const validator = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,6})+$/;\n\n    const check = [\n      nameInput.length > 0,\n      emailInput.length > 0,\n      validator.test(emailInput),\n    ];\n\n    if (check.every((item) => item === true)) {\n      this.setState({ isDisabled: false });\n    } else {\n      this.setState({ isDisabled: true });\n    }\n  };\n\n  changeHandler = ({ target }) => {\n    this.setState({ [target.name]: target.value }, this.checkButton);\n  };\n\n  render() {\n    const { nameInput, emailInput, isDisabled } = this.state;\n    return (\n      <div>\n        <button\n          type=\"button\"\n          data-testid=\"btn-settings\"\n          onClick={ this.redirectToSettings }\n        >\n          Configurações\n        </button>\n        <form className=\"login-container\">\n          <label htmlFor=\"nameInput\">\n            <p>Nome</p>\n            <input\n              type=\"text\"\n              name=\"nameInput\"\n              id=\"nameInput\"\n              value={ nameInput }\n              data-testid=\"input-player-name\"\n              onChange={ this.changeHandler }\n            />\n          </label>\n          <label htmlFor=\"emailInput\">\n            <p>Email</p>\n            <input\n              type=\"text\"\n              name=\"emailInput\"\n              id=\"emailInput\"\n              value={ emailInput }\n              data-testid=\"input-gravatar-email\"\n              onChange={ this.changeHandler }\n            />\n          </label>\n          <button\n            type=\"submit\"\n            data-testid=\"btn-play\"\n            disabled={ isDisabled }\n            onClick={ this.fetchButtonSubmit }\n          >\n            Play\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n  dispatch: PropTypes.func.isRequired,\n};\n\nexport default connect()(Login);\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SAASC,SAAT,QAA0B,kBAA1B;;;AAEA,MAAMC,KAAN,SAAoBL,SAApB,CAA8B;EAAA;IAAA;IAAA,KAC5BM,KAD4B,GACpB;MACNC,SAAS,EAAE,EADL;MAENC,UAAU,EAAE,EAFN;MAGNC,UAAU,EAAE;IAHN,CADoB;;IAAA,KAO5BC,kBAP4B,GAOP,MAAM;MACzB,MAAM;QAAEC;MAAF,IAAc,KAAKC,KAAzB;MACAD,OAAO,CAACE,IAAR,CAAa,WAAb;IACD,CAV2B;;IAAA,KAY5BC,iBAZ4B,GAYR,MAAOC,KAAP,IAAiB;MACnC,MAAM;QAAEJ,OAAF;QAAWK;MAAX,IAAwB,KAAKJ,KAAnC;MACA,MAAM;QAAEL,SAAF;QAAaC;MAAb,IAA4B,KAAKF,KAAvC;MACAS,KAAK,CAACE,cAAN;MACA,MAAMC,QAAQ,GAAG,MAAMf,UAAU,EAAjC;MACAgB,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACG,KAAvC;MACAL,QAAQ,CAACZ,SAAS,CAAC;QAAEkB,IAAI,EAAEf,SAAR;QAAmBgB,KAAK,EAAEf;MAA1B,CAAD,CAAV,CAAR;MACAG,OAAO,CAACE,IAAR,CAAa,OAAb;IACD,CApB2B;;IAAA,KAsB5BW,WAtB4B,GAsBd,MAAM;MAClB,MAAM;QAAEjB,SAAF;QAAaC;MAAb,IAA4B,KAAKF,KAAvC;MACA,MAAMmB,SAAS,GAAG,6DAAlB;MAEA,MAAMC,KAAK,GAAG,CACZnB,SAAS,CAACoB,MAAV,GAAmB,CADP,EAEZnB,UAAU,CAACmB,MAAX,GAAoB,CAFR,EAGZF,SAAS,CAACG,IAAV,CAAepB,UAAf,CAHY,CAAd;;MAMA,IAAIkB,KAAK,CAACG,KAAN,CAAaC,IAAD,IAAUA,IAAI,KAAK,IAA/B,CAAJ,EAA0C;QACxC,KAAKC,QAAL,CAAc;UAAEtB,UAAU,EAAE;QAAd,CAAd;MACD,CAFD,MAEO;QACL,KAAKsB,QAAL,CAAc;UAAEtB,UAAU,EAAE;QAAd,CAAd;MACD;IACF,CArC2B;;IAAA,KAuC5BuB,aAvC4B,GAuCZ,QAAgB;MAAA,IAAf;QAAEC;MAAF,CAAe;MAC9B,KAAKF,QAAL,CAAc;QAAE,CAACE,MAAM,CAACX,IAAR,GAAeW,MAAM,CAACC;MAAxB,CAAd,EAA+C,KAAKV,WAApD;IACD,CAzC2B;EAAA;;EA2C5BW,MAAM,GAAG;IACP,MAAM;MAAE5B,SAAF;MAAaC,UAAb;MAAyBC;IAAzB,IAAwC,KAAKH,KAAnD;IACA,oBACE;MAAA,wBACE;QACE,IAAI,EAAC,QADP;QAEE,eAAY,cAFd;QAGE,OAAO,EAAG,KAAKI,kBAHjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAQE;QAAM,SAAS,EAAC,iBAAhB;QAAA,wBACE;UAAO,OAAO,EAAC,WAAf;UAAA,wBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YACE,IAAI,EAAC,MADP;YAEE,IAAI,EAAC,WAFP;YAGE,EAAE,EAAC,WAHL;YAIE,KAAK,EAAGH,SAJV;YAKE,eAAY,mBALd;YAME,QAAQ,EAAG,KAAKyB;UANlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAYE;UAAO,OAAO,EAAC,YAAf;UAAA,wBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YACE,IAAI,EAAC,MADP;YAEE,IAAI,EAAC,YAFP;YAGE,EAAE,EAAC,YAHL;YAIE,KAAK,EAAGxB,UAJV;YAKE,eAAY,sBALd;YAME,QAAQ,EAAG,KAAKwB;UANlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAZF,eAuBE;UACE,IAAI,EAAC,QADP;UAEE,eAAY,UAFd;UAGE,QAAQ,EAAGvB,UAHb;UAIE,OAAO,EAAG,KAAKK,iBAJjB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAvBF;MAAA;QAAA;QAAA;QAAA;MAAA,QARF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EA2CD;;AAxF2B;;AA2F9BT,KAAK,CAAC+B,SAAN,GAAkB;EAChBzB,OAAO,EAAEV,SAAS,CAACoC,KAAV,CAAgB;IACvBxB,IAAI,EAAEZ,SAAS,CAACqC,IAAV,CAAeC;EADE,CAAhB,EAENA,UAHa;EAIhBvB,QAAQ,EAAEf,SAAS,CAACqC,IAAV,CAAeC;AAJT,CAAlB;AAOA,eAAerC,OAAO,GAAGG,KAAH,CAAtB"},"metadata":{},"sourceType":"module"}